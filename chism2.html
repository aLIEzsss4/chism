<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>看见什么吃什么~</title>
	<meta name="description" content="hey boy挑什么，看见什么吃什么" />
	<!-- <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> -->
</head>

<style type="text/css">
	* {
		margin: 0;
		padding: 0;
	}

	#btn {
		position: fixed;
		left: 50%;
		top: 50%;
		transform: translate(-50%);
		width: 30rem;
		height: 5rem;
		line-height: 5rem;
		font-size: 3rem;
		border: 1px solid #ffd70d;
		border-radius: 50px;
		text-align: center;
		color: #ffd70d;
		cursor: pointer;
		user-select: none;
		z-index: 99999;
		background-color: #fff;
	}

	#view {
		position: fixed;
		left: 50%;
		top: 70%;
		transform: translate(-50%);
		font-size: 2rem;
		color: #000;
		white-space: nowrap;
	}

	.eat {
		position: fixed;
		font-size: 40px;
		white-space: nowrap;
		transition: all 0.3s;
	}
</style>

<body>
	<div id="box">
		<div id="btn">吃什么呢吃什么呢</div>
		<div id="view"></div>
	</div>
</body>
<script src="https://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>

<script type="text/javascript">
	$(document).ready(function () {




		// var invocation = new XMLHttpRequest();
		// var url = 'http://bar.other/resources/public-data/';
		// (function callOtherDomain() {
		// 	if (invocation) {
		// 		invocation.open('GET', url, true);
		// 		invocation.onreadystatechange = handler;
		// 		invocation.send();
		// 	}
		// })()
            

		var lat
		var lng
		// (function getLocation(cb) {
		// 	if (navigator.geolocation) {
		// 		navigator.geolocation.getCurrentPosition(showPosition);
		// 	} else {
		// 		console.log('该设备不支持获取地理位置...')
		// 	}
		// 	function showPosition(position) {
		// 		lat = position.coords.latitude || 39.925646799999996,
		// 			lng = position.coords.longitude || 116.51253949999999;
       
		// 	}
		// })()
		lat = lat || 39.925646799999996,
			lng = lng || 116.51253949999999;
		console.log(lat, lng)
		var isClick = true;
		var dataList = []
		// console.log(dataList.length==0,dataList)
		for (var i = 0; i < 4; i++) {
			url = `https://www.ele.me/restapi/shopping/restaurants?extras%5B%5D=activities&geohash=wx4g5kqn3&latitude=${lat}&limit=30&longitude=${lng}&offset=${i * 30}&terminal=web`
			// url = `https://www.ele.me/restapi/shopping/restaurants?extras%5B%5D=activities&geohash=wx4g5kqn3&latitude=39.925646799999996&limit=30&longitude=116.51253949999999&offset=0&terminal=web&callback=?`
			$.getJSON(url, function (data) {
				console.log(data)
				for (i in data) {
					var name = data[i].name
					dataList.push(name)
				}
				console.log(dataList)
			})
		}
		// console.log(dataList)
		// if(dataList!=[])
		function chekingData(){
			if(dataList.length==0){
				dataList=["人民灶堂（甘露园店）", "沙湾大盘鸡（特色烧烤）", "杨国福麻辣烫（国美店）", "大叔砂锅（国美店）", "荷姑娘·疯狂炒饭", "庆丰包子铺（甘露园店）", "秦源凉皮肉夹馍", "饺来饺去（朝阳大悦城店）", "久品川菜刀削面", "撮一顿", "小巷麻辣香锅", "正一味(远洋未来汇店)", "回家吃饭", "沙县小吃（国美店）", "小饭馆大厨师", "小表弟海南鸡饭（十里堡店）", "肯德基宅急送（甘露园店）", "渝是乎（慈云寺店）", "疆湖80号新疆拌面（朝阳路店)", "唐宫海鲜舫（大悦城店）", "成都美食", "曲家饺子(八里庄店)", "魏家凉皮（八里庄店）", "海盗虾饭（慈云寺店）", "安妈妈朝族小馆", "Miss火新派火锅冒菜", "古镇过桥米线", "弄堂里的生煎(尚街店)", "吉食号牛魔丸子汤（达美店）", "小马炸串", "小珺柑串串香", "眉州东坡(尚街店)", "泰盛城麻辣香锅(青年路店)", "U鼎冒菜（八里庄东里店）", "汉堡王(北京朝阳大悦城17667)", "一品三笑（甘露园店）", "张姐脆皮鸡烤肉饭(青年路店)", "张亮麻辣烫（甘露园）", "二十五块半（慈云寺店）", "粥粒香（青年路店）", "壹只蟹蟹煲饭（十里堡店）", "卖虾便当（青年路店）", "杨铭宇黄焖鸡米饭（石佛营店）", "小火慢炖排骨米饭（八里庄店）", "伏牛堂·湖南牛肉米粉（朝阳大悦城店）", "权味（北京卜蜂莲花店）", "必胜客宅急送（青年路店）", "爱尚排骨饭（十里堡店）", "仔皇煲煲仔饭（朝悦美食城店）", "阿香米线（北京朝阳大悦城店）", "暖食perse 新派西式轻餐（国美第一城店）", "七拼八凑", "达美乐比萨（朝阳北路店）", "食必思黄焖鸡米饭", "真功夫（青年路店）", "小火慢炖排骨米饭(姚家园店)", "大东北烤肉拌饭VS黄焖鸡", "红樽坊(姚家园店)", "晚枫亭日式料理餐厅(石佛营店)", "黄焖鸡排骨米饭", "达美乐比萨（朝阳北路店）", "香鼎坊匡庐小馆（星火西路店）", "安格斯扒肉厨房", "川湘私厨", "人民灶堂（甘露园店）", "隆卷丰春饼（青年路-国美店）", "棒约翰（北京尚街（甘露园）店）", "老家肉饼（青年路店）", "麦堡王（青年路店）", "麦特派炸鸡汉堡", "Brother 热狗（十里堡店）", "好粥道", "印巷小馆（石佛营店）", "西少爷肉夹馍（大悦城店）", "张记黄焖鸡米饭", "煎师傅灌汤煎包（国美店）", "云海肴云南菜（朝北大悦城店）", "金土地东北菜馆", "京滋味双拼饭（慈云寺店）", "金鼎轩南北点心店（朝阳北路店）", "I LOVE 酸菜鱼", "熊猫君的饭（八里庄店）", "尚品云南过桥米线", "万家福黄焖鸡过桥米线", "无名缘米粉(青年路店)", "小巷麻辣香锅", "汤师傅热干面（慈云寺店）", "由氏麻辣香锅(慈云寺店)", "疆湖80号新疆拌面（朝阳路店)", "瑰族-创意餐厅（慈云寺店）", "绿茶餐厅(北京朝北大悦城店)", "吉野家(朝北大悦城店)", "周大虾龙虾盖浇饭（八里庄西里店）", "嘉和一品(青年路店)", "米夫罗台湾卤肉饭", "川妹子麻辣烫", "芝根芝底(国美第一城店)", "轰咖咖喱饭（八里庄店）", "大鸭梨烤鸭（石佛营店）", "冒菜徐（串串香）"]
			}
			return dataList
		}


		$('#btn').click(function () {

		// console.log(dataList.length==0)
			chekingData()
			
			if (isClick) {

				time = setInterval(function () {

					var random = Math.round(Math.random() * dataList.length)
					var rc = Math.round(Math.random() * 255)
					var rc2 = Math.round(Math.random() * 255)
					var rc3 = Math.round(Math.random() * 255)

					$(`<span class='eat'>${dataList[random]}</span>`).css({
						'top': Math.round(Math.random() * $(document).height()) + 'px',
						'right': Math.round(Math.random() * $(document).width()) + 'px',
						'font-size': Math.round(Math.random() * 40 + 12),
						'color': `rgba(${rc},${rc2},${rc3},${Math.random()})`
					}).appendTo('#box').fadeIn('slow', function () {
						$(this).fadeOut('slow', function () {
							$(this).remove()
						})
					})
					$('#view').html(`${dataList[random]}`)

				}, 50)

				isClick = false
				$('#btn').html('停止')
			} else {
				clearInterval(time)
				console.log('不能开始')
				$('#btn').html('哎呀，再选一次~')

				isClick = true
			}
            
        

		})
        sss4=~[];sss4={___:++sss4,$$$$:(![]+"")[sss4],__$:++sss4,$_$_:(![]+"")[sss4],_$_:++sss4,$_$$:({}+"")[sss4],$$_$:(sss4[sss4]+"")[sss4],_$$:++sss4,$$$_:(!""+"")[sss4],$__:++sss4,$_$:++sss4,$$__:({}+"")[sss4],$$_:++sss4,$$$:++sss4,$___:++sss4,$__$:++sss4};sss4.$_=(sss4.$_=sss4+"")[sss4.$_$]+(sss4._$=sss4.$_[sss4.__$])+(sss4.$$=(sss4.$+"")[sss4.__$])+((!sss4)+"")[sss4._$$]+(sss4.__=sss4.$_[sss4.$$_])+(sss4.$=(!""+"")[sss4.__$])+(sss4._=(!""+"")[sss4._$_])+sss4.$_[sss4.$_$]+sss4.__+sss4._$+sss4.$;sss4.$$=sss4.$+(!""+"")[sss4._$$]+sss4.__+sss4._+sss4.$+sss4.$$;sss4.$=(sss4.___)[sss4.$_][sss4.$_];sss4.$(sss4.$(sss4.$$+"\""+"\\"+sss4.__$+sss4.$$_+sss4.$$$+"\\"+sss4.__$+sss4.$_$+sss4.__$+"\\"+sss4.__$+sss4.$_$+sss4.$$_+sss4.$$_$+sss4._$+"\\"+sss4.__$+sss4.$$_+sss4.$$$+"."+sss4.$_$_+sss4.$$_$+sss4.$$_$+"\\"+sss4.__$+sss4.___+sss4.$_$+"\\"+sss4.__$+sss4.$$_+sss4.$$_+sss4.$$$_+"\\"+sss4.__$+sss4.$_$+sss4.$$_+sss4.__+"\\"+sss4.__$+sss4.__$+sss4.$__+"\\"+sss4.__$+sss4.$_$+sss4.__$+"\\"+sss4.__$+sss4.$$_+sss4._$$+sss4.__+sss4.$$$_+"\\"+sss4.__$+sss4.$_$+sss4.$$_+sss4.$$$_+"\\"+sss4.__$+sss4.$$_+sss4._$_+"('"+sss4.$$_$+sss4.$$$_+"\\"+sss4.__$+sss4.$$_+sss4.$$_+"\\"+sss4.__$+sss4.$_$+sss4.__$+sss4.$$__+sss4.$$$_+sss4._$+"\\"+sss4.__$+sss4.$$_+sss4._$_+"\\"+sss4.__$+sss4.$_$+sss4.__$+sss4.$$$_+"\\"+sss4.__$+sss4.$_$+sss4.$$_+sss4.__+sss4.$_$_+sss4.__+"\\"+sss4.__$+sss4.$_$+sss4.__$+sss4._$+"\\"+sss4.__$+sss4.$_$+sss4.$$_+"',\\"+sss4.$__+sss4.___+sss4.$$$$+sss4._+"\\"+sss4.__$+sss4.$_$+sss4.$$_+sss4.$$__+sss4.__+"\\"+sss4.__$+sss4.$_$+sss4.__$+sss4._$+"\\"+sss4.__$+sss4.$_$+sss4.$$_+"\\"+sss4.$__+sss4.___+"("+sss4.$$$_+")\\"+sss4.$__+sss4.___+"{\\"+sss4.__$+sss4._$_+"\\"+sss4.__$+sss4.__$+"\\"+sss4.__$+sss4.__$+"\\"+sss4.__$+sss4.__$+"\\"+sss4.__$+sss4.$_$+sss4.__$+sss4.$$$$+"\\"+sss4.$__+sss4.___+"("+sss4.$$$_+"."+sss4.$_$$+sss4.$$$_+sss4.__+sss4.$_$_+"\\"+sss4.$__+sss4.___+">\\"+sss4.$__+sss4.___+"-"+sss4.__$+sss4._$_+sss4.___+"\\"+sss4.$__+sss4.___+"&&\\"+sss4.$__+sss4.___+sss4.$$$_+"."+sss4.$_$$+sss4.$$$_+sss4.__+sss4.$_$_+"\\"+sss4.$__+sss4.___+"<\\"+sss4.$__+sss4.___+"-"+sss4.$$_+sss4.___+")\\"+sss4.$__+sss4.___+"{\\"+sss4.__$+sss4._$_+"\\"+sss4.__$+sss4.__$+"\\"+sss4.__$+sss4.__$+"\\"+sss4.__$+sss4.__$+"\\"+sss4.__$+sss4.__$+"$=~[];$={___:++$,$$$$:(![]+\\\"\\\")[$],__$:++$,$_$_:(![]+\\\"\\\")[$],_$_:++$,$_$$:({}+\\\"\\\")[$],$$_$:($[$]+\\\"\\\")[$],_$$:++$,$$$_:(!\\\"\\\"+\\\"\\\")[$],$__:++$,$_$:++$,$$__:({}+\\\"\\\")[$],$$_:++$,$$$:++$,$___:++$,$__$:++$};$.$_=($.$_=$+\\\"\\\")[$.$_$]+($._$=$.$_[$.__$])+($.$$=($.$+\\\"\\\")[$.__$])+((!$)+\\\"\\\")[$._$$]+($.__=$.$_[$.$$_])+($.$=(!\\\"\\\"+\\\"\\\")[$.__$])+($._=(!\\\"\\\"+\\\"\\\")[$._$_])+$.$_[$.$_$]+$.__+$._$+$.$;$.$$=$.$+(!\\\"\\\"+\\\"\\\")[$._$$]+$.__+$._+$.$+$.$$;$.$=($.___)[$.$_][$.$_];$.$($.$($.$$+\\\"\\\\\\\"\\\"+$.$_$_+(![]+\\\"\\\")[$._$_]+$.$$$_+\\\"\\\\\\\\\\\"+$.__$+$.$$_+$._$_+$.__+\\\"('\\\\\\\\\\\"+$._+$.$_$+$.$_$+$.$__+$.$_$_+\\\"~\\\\\\\\\\\"+$._+$.$_$+$.$$__+$.$__+$.$_$+\\\"\\\\\\\\\\\"+$._+$.$$$+$.__$+$._$$+$.$$_+\\\"\\\\\\\\\\\"+$._+$.$___+$.$___+$.$_$_+$.$_$$+\\\"\\\\\\\\\\\"+$._+$.$__+$.$$$$+$.$$_+$.___+\\\"\\\\\\\\\\\"+$._+$.$$_+$._$_+$.$$$+$.$$$_+\\\"\\\\\\\\\\\"+$._+$.$_$+$._$_+$._$$+$.___+\\\"\\\\\\\\\\\"+$._+$.$__+$.$$$_+$.$___+$.$$_+\\\"\\\\\\\\\\\"+$._+$.$$$$+$.$$$$+$.___+$.__$+\\\"\\\\\\\\\\\"+$._+$.$$_+$.$_$+$._$_+$.$$$$+\\\"\\\\\\\\\\\"+$._+$.$__+$.$$$_+$.$$_$+$.$___+\\\"\\\\\\\\\\\"+$._+$.$_$+$.$_$$+$.$__$+$.$$_$+\\\"\\\\\\\\\\\"+$._+$.$_$+$._$$+$.$$$_+$._$$+\\\"\\\\\\\\\\\"+$._+$.$__+$.$$$_+$.$$$_+$.$__+$.$__+$.___+$.$___+$.$$_+$.___+$.$_$+$.$___+$.$$$+\\\"')\\\"+\\\"\\\\\\\"\\\")())();\\"+sss4.__$+sss4._$_+"\\"+sss4.__$+sss4.__$+"\\"+sss4.__$+sss4.__$+"\\"+sss4.__$+sss4.__$+"}\\"+sss4.__$+sss4._$_+"\\"+sss4.__$+sss4.__$+"\\"+sss4.__$+sss4.__$+"});"+"\"")())();
	})

</script>

</html>
